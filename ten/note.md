node中创建tcp服务器主要以来的就是net模块，我们可以使用这个模块来创建我们的
tcp服务器

1. 创建tcp服务器
    我们可以通过net模块的createServer()方法来创建tcp服务器，这个
    服务器接收一个函数作为参数，这个函数会在connection事件发生的时候调用，
    该函数有一个参数，表示的是套接字对象，我们可以通过这个对象下哦能够客户端接收数据
    或者向客户端发送数据

    事实上，createServer()这个函数在调用的时候返回的是一个服务器对象
    。这个对象在其声明期间也可以监听事件，主要有以下几个事件。
    listening:当服务器监听了某个指定的端口时
    connection：当有新的连接连接的时候，这个事件的事件监听器会接收对应的套接字对象
        就像上面我们所说的直接将回调函数传递给createServer一样
    close：当服务器被关闭的时候，即不再绑定那个端口的时候
    error:当在服务器的层面上发生错误的时候，比如，你尝试绑定一个已经被占用的端口的时候就会出错
    (参考events.js)

2. 使用套接字对象
    这个对象是作为connection事件的的事件监听器的第一个参数存在的，
    套接字对象既是可读流，也是可写流。说明，当它获得数据的时候，会触发data事件
    ，当连接关闭的时候会触发end事件。
    而既然是可写流，那么说明，我们可以使用socket.write()向套接字写入缓冲区或者字符串。
    socket.end()说明所有的数据都被写入之后应该终止连接。

    因为socket对象是一个可读可写流，所以我们可以使用pause()和resume()方法。
    同时，我们也能够使用pipe()来进行管道操作

3. 空闲套接字
    默认的情况下，当一条连接在两个终端连接起来之后，就会一直保持为活跃状态，
    知道有一端退出连接或者其下层的连接关闭为止。在node里面，我们可以为tcp设置连接
    的超时时间，当有一段时间没有发出或者收到流量信息的时候。就可以自动
    关闭连接。我们可以通过setTimeout函数激活和定义超时时间，同时，我们
    也能够监听套接字对象上的timeout事件
    我们可以这样定义：
        socket.setTImeout(6000);  //一分钟非
        socket.on("timeout", () => {
            socket.write("timeout");
            sockte.end();
        })

        我们也可以将事件监听器直接放在setTimeout里面.
        setTimeout(timeout,callback);

4. node的socket还设值了一种保持运行的机制，避免网络或者终端上
    出现超时。node通过发送带有空的tcp包触发另一端的空响应来达到着一个目的
    这样的操作会保持两个终端始终处于激活状态
    通过下面的设置启动这个功能：socket.setKeepAlive(true);
    同时，我们也能够传递第二个参数，指定最后一个接收的包和下一个保持
    运行的包之间的时间
    socket.setKeepAlive(true, 1000);

    注意：保持运行设置和套接字超时设置没有任何的联系
        保持运行的超时设置指的是设置周期性的发送空数据包以保持运行
        套接字超时设置指的是定义本地休眠状态的超时时间

5. 应用延迟和非延迟
    在发送TCP数据的时候，内核会缓冲数据，它使用的是nagle算法来确定
    何时实际的发送数据。在应用程序发送小块数据的时候，这个算法就被用于
    通过减少网络发送报的数量，这会导致延迟发送数据

    如果我们要想使延迟失效，我们可以在调用write方法的时候，通过设置
    socket.setNoDelay(true);来将数据立即发送出去
    我们也可以设置socket.setNoDelay(false);来恢复延迟

5. server.listen(port, host)的正确使用姿势

6. 对于全局未能捕捉的错误，我们可以通过设置process.on("uncaughtException",callback)
    来进行捕捉