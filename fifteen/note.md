使用TLS/SSL保证服务器的安全性

传输层安全(TLS)和安全套接字层(SSL)允许客户端/服务器应用程序以阻止窃听(其他人看到你的信息)
和篡改(别人修改你的信息)的方式通过网络进行通信。TSL和SSL会在传输层上对网络进行加密。这使得隐私和消息都能得到验证

1. 理解私钥和公钥
    公钥加密是指两个独立密钥的加密系统，一个密钥用来加密明文，另一个密钥解密已加密的信息。
    其中一个密钥是公有的，另一个是私有的。如果明文使用公钥加密，那么只能用私钥对其进行
    解密，这样可以使公钥和私钥的所有者进行通信。如果明文是私钥加密的，那么公钥就可以
    对其进行解密，这个时候，系统会验证私钥所有者在文档上的签名

2. 产生私钥
    node中的TLS是基于OPenSSL库实现的，我们需要安装这个库，我们可以在终端输入openssl命令来
    查看我们是否已经成功安装了这个库

    TSL依赖于公钥/私钥基础结构，在这个基础结构中，每个客户端和服务器都必须有一个
    私钥对消息进行签名。我们可以在openssl命令行中来创建私钥
    openssl genrsa -out my_key.pem 1024
    这个命令会创建一个文件my_key.pem，也就是私钥

3. 产生公钥
    涉及TSL服务器在和客户端进行验证的时候彼此必须要有一个证书，证书是由认证中心签名
    或者签名的公钥，获取证书的第一步就是创建一个证书签发请求文件
    openssl req -new -key my_key.pem -out my_csr.pem
    这个命令会创建一个my_csr.pem文件

    openssl x509 -req -in my_csr.pem -signkey my_key.pem -out my_cert.pem
    这个命令会在私钥和认证请求的基础上创建一个自签名文件my_cert.pem

4. 构建TSL服务器
    构建TSL服务器和创建TCP服务器的过程基本相似，但是稍微复杂一些，因为你需要传入服务器的私钥和证书等文件。
    参考：tsl.js文件

    绑定端口号：server.listen(port)

    监听连接：当有新的连接到来的时候，服务器会发射secureConnection事件，并将其传入套接字来注册回调函数

    从客户端读取数据：当有客户端连接的时候，服务器就会调用secureConnection事件，并向其传入一个tls.CleartextStream类的实例
    传入回调函数。这个实例和net.socket类似，也是一个可读可写流，这意味着流的所有的事件我们都能使用。
    所以我们可以监听data事件来获取客户端尚未加密的数据

    向客户端发送数据：可以使用CleartextStream对象，向连接到服务器上的客户端发送数据
        主要使用的是CleartextStream.write()这个方法
    
    终止连接：只需要在CleartextStream上调用end方法即可终止连接
